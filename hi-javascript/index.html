<!doctype html><html lang=en><head><title>Hi，原生 JavaScript :: 木木木木木</title>
<meta charset=utf-8><meta charset=UTF-8><meta name=renderer content="webkit"><meta name=force-rendering content="webkit"><meta name=referrer content="no-referrer"><meta http-equiv=X-UA-Compatible content="IE=Edge,chrome=1"><script>(!1||!!window.MSInputMethodContext&&!!document.documentMode)&&document.write('<script id="_iealwn_js" data-outver="11" src="https://support.dmeng.net/ie-alert-warning/latest.js"></script>')</script><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content=" 移除 jQuery 依赖，移，不移……
很早就想干这个事，可懒，懒得查看各手册语法，毕竟，累。这几天借被迫私有部署评论系统，再次重拾折腾博客的劲，肝，就一个字！
过程，掠过不表。记录一下替换的几个「原生 JavaScript」插件。
相对时间 Lately.js ：原生 JavaScript，仅 800 字节！却简单、好用的 Timeago 插件
&amp;lt;script src=&amp;#34;//tokinx.github.io/lately/lately.min.js&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script&amp;gt; window.Lately &amp;amp;&amp;amp; Lately.init({ target: &amp;#39;.post-date&amp;#39; }); &amp;lt;/script&amp;gt; "><meta name=keywords content><link rel=alternate type=application/rss+xml href=/feed title=木木木木木><link rel=canonical href=https://yuranh211.github.io/hi-javascript/><link rel=stylesheet href=/LXGWNeoZhiSong/lxgwneozhisong.css media=print onload='this.media="all"'><link rel=stylesheet href="/theme-lmm.css?v=2401-1"><link rel="shortcut icon" href=https://yuranh211.github.io/favicon.ico><link rel=apple-touch-icon href=https://yuranh211.github.io/favicon.ico><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=apple-mobile-web-app-title content="木木木木木"><link rel=bookmark href=https://yuranh211.github.io/favicon.ico><link rel=apple-touch-icon-precomposed sizes=180x180 href=https://yuranh211.github.io/favicon.ico><meta property="og:title" content="Hi，原生 JavaScript"><meta property="og:description" content="
移除 jQuery 依赖，移，不移……

很早就想干这个事，可懒，懒得查看各手册语法，毕竟，累。这几天借被迫私有部署评论系统，再次重拾折腾博客的劲，肝，就一个字！
过程，掠过不表。记录一下替换的几个「原生 JavaScript」插件。
相对时间
Lately.js ：原生 JavaScript，仅 800 字节！却简单、好用的 Timeago 插件
<script src=&#34;//tokinx.github.io/lately/lately.min.js&#34;></script>
<script>
    window.Lately && Lately.init({ target: '.post-date' });
</script>
"><meta property="og:type" content="article"><meta property="og:url" content="https://yuranh211.github.io/hi-javascript/"><script defer src=https://views.edui.fun/lmm214.js data-website-id=ddb6c6c5-cb77-4e2d-a3fc-768f2957f78f></script><script src=/quicklink.umd.js></script><script>window.addEventListener("load",()=>{quicklink.listen()})</script><link rel=prefetch href=https://yuranh211.github.io/hi-docsify/><link rel=prefetch href=https://yuranh211.github.io/twikoo-by-docker/></head><body><script>checkNightMode();function checkNightMode(){var e=localStorage.getItem("theme")||"";e=="dark"?document.body.classList.add("dark"):(e==null||e=="undefined"||e=="")&&(matchMedia("(prefers-color-scheme: dark)").matches?document.body.classList.add("dark"):matchMedia("(prefers-color-scheme: light)").matches&&document.body.classList.remove("dark"))}</script><div class=container><header class=header><span class=header__inner><a href=https://yuranh211.github.io/ class=logo style=text-decoration:none><span class=logo__text>木木木木木</span>
<span class=logo__cursor></span>
</a><span class=header__right><nav class="menu hidden"><ul class="menu__inner menu__inner--desktop"><li><a href=/bbs/>哔哔</a></li><li><a href=/friends/>友圈</a></li><li><a href=/goods/>好物</a></li><li><a href=/archives/>归档</a></li><li><a href=https://edui123.com/>导航</a></li><li><a href=/about/>关于</a></li><li><a href=javascript:; onclick=randomPost() title=随机访问一篇文章><svg t="1660103436159" class="icon search-box-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="1184" width="32" height="32"><path d="M421.376 481.28s117.248 24.576 175.104-8.704c0 0-89.6 70.144-89.6 166.4.512-.512-8.192-121.344-85.504-157.696zm17.408 487.936s68.608 6.656 68.608-80.896c0 0 3.072 88.576 65.024 78.336.0.512-50.688 22.016-133.632 2.56zM161.28 238.08s-30.208 65.536 11.264 91.648c0 0-67.072-17.408-81.408 37.376.0.0 8.704-82.944 70.144-129.024zM857.6 227.328s49.152 50.176 1.024 81.408c0 0 58.88-18.432 66.56 36.352.0.0 5.12-69.632-67.584-117.76z" p-id="1185"/><path d="M443.392 970.752c-5.632.0-10.752-1.024-15.36-3.072L157.184 810.496l-1.536-1.024s-1.024-1.024-4.608-2.56c-51.2-29.184-62.976-94.208-65.536-120.832V386.56c0-3.072.512-7.168 1.024-11.264l.512-3.584 1.024-2.56c19.456-50.688 76.8-51.2 103.936-44.032l-1.536 5.632 4.096-6.144L476.16 486.4l18.944 37.888c20.992 36.864 29.184 77.824 32.768 99.84v258.048c-4.608 56.32-36.864 76.288-55.808 82.944-1.024.512-15.36 5.632-28.672 5.632zM181.248 774.656l263.168 152.576c12.288-.512 36.864-6.656 40.448-48.128V628.736c-4.608-31.744-20.992-103.936-72.192-128L322.56 445.44l1.536 3.072L181.76 366.08c-2.048-.512-40.448-9.216-52.736 15.872-.512 2.56-.512 4.608-.512 6.144v294.4c1.536 16.896 9.728 67.072 43.52 86.528 3.584 2.048 6.656 4.096 9.216 5.632z" p-id="1186"/><path d="M837.632 212.992c6.656 4.096 12.8 7.168 18.432 10.752l1.536 1.024 1.536 1.536c5.12 4.096 10.752 9.216 16.384 15.36 6.144 11.776 5.632 33.28 4.608 49.152-1.024 12.288-6.656 30.208-26.624 44.544l-1.024.512-247.808 156.672c-26.624 14.336-62.976 18.432-96.256 18.432-40.96.0-77.824-6.656-89.088-8.704l-3.072-.512-245.248-142.336c-39.424-29.696-28.16-85.504-15.36-113.664l2.56-6.144 263.68-166.912c29.184-14.336 104.448-43.008 173.056-1.024 3.584 2.56 58.368 34.304 119.296 69.632M431.616 460.8c40.448 7.168 114.176 13.824 152.576-6.144L828.928 299.52c7.168-5.632 8.192-10.24 8.704-12.8 1.024-11.264-9.728-26.624-15.36-32.768-55.808-32.256-243.712-141.312-250.368-145.408-49.664-30.72-107.008-9.216-130.048 2.56L192.512 268.8c-4.096 12.288-12.288 42.496 3.584 55.808L431.616 460.8z" p-id="1187"/><path d="M831.488 299.008c4.096-1.024 38.4-11.264 66.048 6.144 7.168 4.608 17.92 11.776 24.064 24.576 1.024 5.632 4.096 10.752 4.608 16.896v2.048l-1.024 323.072c-5.12 35.328-22.528 91.648-77.312 125.44l-5.12 3.584h-1.024L579.584 966.656l-4.608.512c-4.096.512-8.704 1.024-12.8 1.024-15.872.0-30.208-5.12-41.984-14.848-24.576-20.48-32.768-55.808-35.328-73.728l-1.024-252.928h1.536c6.144-96.768 88.576-164.864 96.768-171.008l-.512-.512L829.44 299.52M528.384 867.328c.512 10.24 5.12 41.472 19.968 53.76 3.072 2.56 7.68 5.632 16.384 5.12L829.44 758.272c56.32-38.4 53.76-115.712 53.76-116.224l-.512-32.256 1.024-250.368h-.512c-1.536-12.8-7.168-16.384-8.704-17.408-8.704-5.632-23.552-3.072-28.672-2.048L610.304 488.96c-1.024.512-80.896 65.024-80.896 149.504h-1.536l.512 228.864zM435.2 264.192c0 27.648 31.744 50.176 71.168 50.176s71.168-22.528 71.168-50.176-31.744-50.176-71.168-50.176S435.2 236.544 435.2 264.192z" p-id="1188"/><path d="M663.552 782.848c0 30.72-22.528 67.072-49.664 80.384-27.648 13.824-50.176-.512-50.176-31.232s22.528-67.072 50.176-80.384c27.136-13.824 49.664.0 49.664 31.232zM760.32 602.624c0 30.72-22.528 67.072-49.664 80.384-27.648 13.824-49.664-.512-49.664-31.232s22.528-67.072 49.664-80.384c27.136-13.824 49.664.512 49.664 31.232zM867.84 428.032c0 30.72-22.528 67.072-49.664 80.384C790.528 522.24 768 507.904 768 477.184s22.528-67.072 50.176-80.384c27.136-13.824 49.664.0 49.664 31.232zM270.848 538.112c0 30.72-22.016 41.984-48.64 24.576-27.136-16.896-48.64-55.808-48.64-86.528s22.016-41.984 48.64-24.576c26.624 16.896 48.64 55.808 48.64 86.528zm161.28 285.184c0 30.72-22.016 41.984-48.64 24.576-26.624-17.408-48.64-55.808-48.64-86.528s22.016-41.984 48.64-24.576c26.624 16.896 48.64 55.808 48.64 86.528z" p-id="1189"/></svg></a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/bbs/>哔哔</a></li><li><a href=/friends/>友圈</a></li><li><a href=/goods/>好物</a></li><li><a href=/archives/>归档</a></li><li><a href=https://edui123.com/>导航</a></li><li><a href=/about/>关于</a></li></ul></nav><span class="menu-trigger hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class="post coding"><div class=breadcrumb><li><a href=https://yuranh211.github.io/>首页</a></li><li><a href=https://yuranh211.github.io/posts/>文章</a></li><li><a href=https://yuranh211.github.io/posts/coding/>折腾</a></li><li class=active><a href=https://yuranh211.github.io/hi-javascript/>Hi，原生 JavaScript</a></li></div><h2 class=post-title><a href=https://yuranh211.github.io/hi-javascript/>Hi，原生 JavaScript</a></h2><div class=post-meta><span class=post-date>2022-08-11 23:44:34</span><span> / <span id=twikoo_visitors>0</span> 阅读</span></div><div class=post-ai onclick=geminiAI()><img alt="Static Badge" src="https://api-shields.edui.fun/badge/Gemini-文章摘要-blue.svg?logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Im0yMS42NCAzLjY0bC0xLjI4LTEuMjhhMS4yMSAxLjIxIDAgMCAwLTEuNzIgMEwyLjM2IDE4LjY0YTEuMjEgMS4yMSAwIDAgMCAwIDEuNzJsMS4yOCAxLjI4YTEuMiAxLjIgMCAwIDAgMS43MiAwTDIxLjY0IDUuMzZhMS4yIDEuMiAwIDAgMCAwLTEuNzJNMTQgN2wzIDNNNSA2djRtMTQgNHY0TTEwIDJ2Mk03IDhIM20xOCA4aC00TTExIDNIOSIvPjwvc3ZnPg=="></div><style>@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}.post-ai-result svg{animation:spin 1s infinite linear}</style><script>let postAI=document.querySelector(".post-ai"),postTile=document.querySelector(".post-title a").textContent;async function geminiAI(){postAI.insertAdjacentHTML("afterend",'<div class="post-ai-result"><svg xmlns="http://www.w3.org/2000/svg" width="1.5rem" height="1.5rem" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 1 1-6.219-8.56"/></svg></div>'),postAI.classList.add("noclick");let e="https://api-gemini.immmmm.com/v1/chat/completions";try{let t=document.querySelector(".post-ai-result"),n=document.querySelector(".post-content").textContent,s=n.replace(/\n/g,"").replace(/[ ]+/g," ").replace(/<pre>[\s\S]*?<\/pre>/g,"").substring(0,3e4),o=`文章标题：${postTile}，具体内容：${s}`;const i=await fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({model:"gemini-pro",messages:[{role:"system",content:`You are a highly skilled AI trained in language comprehension and summarization. I would like you to read the text delimited by triple quotes and summarize it into a concise abstract paragraph. Aim to retain the most important points, providing a coherent and readable summary that could help a person understand the main points of the discussion without needing to read the entire text. Please avoid unnecessary details or tangential points.
          Only give me the output and nothing else. Do not wrap responses in quotes. Respond in the Chinese language.`},{role:"user",content:o}],temperature:.7,stream:!0})}),a=i.body.getReader();for(;!0;){const{value:n,done:s}=await a.read();if(s)break;const e=(new TextDecoder).decode(n),o=e.match(/DONE/);if(!o){const s=JSON.parse(e.substring(5)),n=s.choices[0].delta.content;n.length>0&&(t.textContent+=n)}}}catch(e){document.querySelector(".post-ai-result").remove(),console.log(e)}}</script><div class=post-content><blockquote><p>移除 jQuery 依赖，移，不移……</p></blockquote><p>很早就想干这个事，可懒，懒得查看各手册语法，毕竟，累。这几天借被迫私有部署评论系统，再次重拾折腾博客的劲，肝，就一个字！</p><p>过程，掠过不表。记录一下替换的几个「原生 JavaScript」插件。</p><h3 id=相对时间>相对时间</h3><p><a href=https://tokinx.github.io/lately/index-zh.html target=_blank rel="noopener nofollow noreferrer">Lately.js</a> ：原生 JavaScript，仅 800 字节！却简单、好用的 Timeago 插件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;//tokinx.github.io/lately/lately.min.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    window.<span style=color:#a6e22e>Lately</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>Lately</span>.<span style=color:#a6e22e>init</span>({ <span style=color:#a6e22e>target</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;.post-date&#39;</span> });
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h3 id=图片灯箱>图片灯箱</h3><p><a href=https://tokinx.github.io/ViewImage/ target=_blank rel="noopener nofollow noreferrer">ViewImage.js</a> ：Gzip后仅 2kb，小巧卓越的原生JavaScript灯箱插件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;//tokinx.github.io/ViewImage/view-image.min.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    window.<span style=color:#a6e22e>ViewImage</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>ViewImage</span>.<span style=color:#a6e22e>init</span>(<span style=color:#e6db74>&#39;.post-content img:not(.avatar,.tk-avatar-img)&#39;</span>)
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h3 id=图片瀑布流>图片瀑布流</h3><p><a href=https://raphamorim.io/waterfall.js/ target=_blank rel="noopener nofollow noreferrer">Waterfall.js</a> ：1KB，无需任何依赖关系即可工作。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://cdnjs.cloudflare.com/ajax/libs/waterfall.js/1.0.2/waterfall.min.js&#34;</span>&gt;<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>script</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>photos</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#39;photos&#39;</span>) <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>photos</span>) {<span style=color:#a6e22e>waterfall</span>(<span style=color:#a6e22e>photos</span>);}
</span></span><span style=display:flex><span>    window.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#39;resize&#39;</span>, <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>waterfall</span>(<span style=color:#a6e22e>photos</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><p>照官方操作上面这样写就OK了，可啪啪打脸！</p><p>因为自己是一串图片链接，img + img + img ……，所以 DOM 的查询、包裹、替换……</p><p>还有，图片没加载，高度没有，还得加个判断并 setTimeout 等待一下。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript data-lang=JavaScript><span style=display:flex><span>  <span style=color:#75715e>//相册瀑布流
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>photosAll</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementsByTagName</span>(<span style=color:#e6db74>&#39;photos&#39;</span>) <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>photosAll</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>;<span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>photosAll</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>photosIMG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>photosAll</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>getElementsByTagName</span>(<span style=color:#e6db74>&#39;img&#39;</span>)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>j</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>;<span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>photosIMG</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>wrap</span>(<span style=color:#a6e22e>photosIMG</span>[<span style=color:#a6e22e>j</span>], document.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#39;div&#39;</span>));
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>wrap</span>(<span style=color:#a6e22e>el</span>, <span style=color:#a6e22e>wrapper</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>wrapper</span>.<span style=color:#a6e22e>className</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;photo&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>parentNode</span>.<span style=color:#a6e22e>insertBefore</span>(<span style=color:#a6e22e>wrapper</span>, <span style=color:#a6e22e>el</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>wrapper</span>.<span style=color:#a6e22e>appendChild</span>(<span style=color:#a6e22e>el</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>isImgLoad</span>(<span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>photos</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#39;photos&#39;</span>) <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>photos</span>) {<span style=color:#a6e22e>waterfall</span>(<span style=color:#a6e22e>photos</span>);}
</span></span><span style=display:flex><span>    window.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#39;resize&#39;</span>, <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>waterfall</span>(<span style=color:#a6e22e>photos</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>t_img</span>,<span style=color:#a6e22e>isLoad</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isImgLoad</span>(<span style=color:#a6e22e>callback</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>photos</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#39;photos&#39;</span>) <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>photos</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>imgHeight</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#39;photos img&#39;</span>).<span style=color:#a6e22e>height</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>imgHeight</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {<span style=color:#a6e22e>isLoad</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;}
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isLoad</span>) {<span style=color:#a6e22e>clearTimeout</span>(<span style=color:#a6e22e>t_img</span>);<span style=color:#a6e22e>callback</span>();} <span style=color:#66d9ef>else</span> {<span style=color:#a6e22e>isLoad</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;<span style=color:#a6e22e>t_img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span> () { <span style=color:#a6e22e>isImgLoad</span>(<span style=color:#a6e22e>callback</span>);}, <span style=color:#ae81ff>200</span>);}
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><h3 id=文章内解析豆瓣条目>文章内解析豆瓣条目</h3><div class=post-preview><div class=post-preview--meta style=width:100%><div class=post-preview--middle><h4 class=post-preview--title><a target=_blank href=https://yuranh211.github.io/post-show-douban-item/>文章内显示豆瓣条目</a></h4><time class=post-preview--date>2022-03-24</time>
<small>#折腾&nbsp;</small><section style=max-height:96px;overflow:hidden class=post-preview--excerpt>小众豆瓣已成刚需，电影、图书看完都会标记下，写日志时常会提到，老想着在文章内「优雅」地展示，官方 API 已废，幸好还有给力的 @mufeng 兄，以下功能就使用其提供的轮子。
换用轮子：https://github.com/cxfksword/douban-api-rs
效果如下 黑匣子 7.2 A young and talented black box analyst is on a mission to solve the reason behind the deadly crash of a brand new aircraft. movie 详谈：左晖 8.7 《详谈》系列是一个长期的知识工程，是一部以人为单位的当代商业史。作者李翔会找到这个时代优秀的商业实践者和价值创造者，与他们深度对话，把他们的成就、经验、方法和挫败一一呈现给你。 本书呈现了李翔于2017年和2020年两次采访贝壳找房、链家创始人左晖的内容。在这本书中，你可以看到左晖及其团队近20年来的选择与坚持——做难而正确的事，也可以看到他们是怎么创造出这些让我们所有人都变得更好的产品、服务和组织的，又经历过什么样的失败和斗争。 编辑推荐： ◎历时3年，独家一手访谈贝壳找房、链家创始人左晖 ◎透过文字，亲历现场，亲“听”左晖及其团队的经验、方法、成就和挫败 ◎《详谈》系列，一部以人为单位的当代商业史 ◎只需每月一杯咖啡的钱，就能跟这个时代优秀的价值创造者做一次精神上的长谈 book</section></div></div></div><p>这货肝了一下午，DOM 查询、替换、插入看了好久手册……</p><p>但，折腾得够尽兴！</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript data-lang=JavaScript><span style=display:flex><span>  <span style=color:#75715e>//文章内显示豆瓣条目 https://immmmm.com/post-show-douban-item/
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>dbAPI</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://douban.edui.fun/&#34;</span>;  <span style=color:#75715e>//自建 API ，何时挂不晓得。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>dbA</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelectorAll</span>(<span style=color:#e6db74>&#34;.post-content a[href*=&#39;douban.com/subject/&#39;]&#34;</span>) <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>dbA</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>;<span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>dbA</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>_this</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>dbA</span>[<span style=color:#a6e22e>i</span>]
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>dbHref</span> <span style=color:#f92672>=</span><span style=color:#a6e22e>_this</span>.<span style=color:#a6e22e>href</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>db_reg</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>/^https\:\/\/(movie|book)\.douban\.com\/subject\/([0-9]+)\/?/</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>db_type</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>dbHref</span>.<span style=color:#a6e22e>replace</span>(<span style=color:#a6e22e>db_reg</span>, <span style=color:#e6db74>&#34;$1&#34;</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>db_id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>dbHref</span>.<span style=color:#a6e22e>replace</span>(<span style=color:#a6e22e>db_reg</span>, <span style=color:#e6db74>&#34;$2&#34;</span>).<span style=color:#a6e22e>toString</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>db_type</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;movie&#39;</span>) {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>this_item</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;movie&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>db_id</span>;
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>dbAPI</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;movies/&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>db_id</span> ;
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#a6e22e>this_item</span>) <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#a6e22e>this_item</span>) <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;undefined&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>url</span>).<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>res</span> =&gt; <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>()).<span style=color:#a6e22e>then</span>( <span style=color:#a6e22e>data</span> =&gt;{
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>setItem</span>(<span style=color:#a6e22e>this_item</span>, <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>data</span>));
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>movieShow</span>(<span style=color:#a6e22e>_this</span>, <span style=color:#a6e22e>this_item</span>)
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>          } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>movieShow</span>(<span style=color:#a6e22e>_this</span>, <span style=color:#a6e22e>this_item</span>)
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>db_type</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;book&#39;</span>) {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>this_item</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;book&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>db_id</span>;
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>dbAPI</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;v2/book/id/&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>db_id</span>;
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#a6e22e>this_item</span>) <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#a6e22e>this_item</span>) <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;undefined&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>url</span>).<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>res</span> =&gt; <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>()).<span style=color:#a6e22e>then</span>( <span style=color:#a6e22e>data</span> =&gt;{
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>setItem</span>(<span style=color:#a6e22e>this_item</span>, <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>data</span>));
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>bookShow</span>(<span style=color:#a6e22e>_this</span>, <span style=color:#a6e22e>this_item</span>)
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>          } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>bookShow</span>(<span style=color:#a6e22e>_this</span>, <span style=color:#a6e22e>this_item</span>)
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }<span style=color:#75715e>// for end
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>movieShow</span>(<span style=color:#a6e22e>_this</span>, <span style=color:#a6e22e>this_item</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>storage</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#a6e22e>this_item</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>storage</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>str</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>_this</span>.<span style=color:#a6e22e>href</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>db_star</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>ceil</span>(<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>rating</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>db_html</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&lt;div class=&#39;post-preview&#39;&gt;&lt;div class=&#39;post-preview--meta&#39;&gt;&lt;div class=&#39;post-preview--middle&#39;&gt;&lt;h4 class=&#39;post-preview--title&#39;&gt;&lt;a target=&#39;_blank&#39; href=&#39;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>str</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&#39;&gt;《&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;》&lt;/a&gt;&lt;/h4&gt;&lt;div class=&#39;rating&#39;&gt;&lt;div class=&#39;rating-star allstar&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>db_star</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&#39;&gt;&lt;/div&gt;&lt;div class=&#39;rating-average&#39;&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>rating</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/div&gt;&lt;/div&gt;&lt;time class=&#39;post-preview--date&#39;&gt;导演：&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>director</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; / 类型：&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>genre</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; / &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>year</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/time&gt;&lt;section style=&#39;max-height:75px;overflow:hidden;&#39; class=&#39;post-preview--excerpt&#39;&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>intro</span>.<span style=color:#a6e22e>replace</span>(<span style=color:#e6db74>/\s*/g</span>,<span style=color:#e6db74>&#34;&#34;</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;&lt;img referrer-policy=&#39;no-referrer&#39; loading=&#39;lazy&#39; class=&#39;post-preview--image&#39; src=&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>img</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&gt;&lt;/div&gt;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>db_div</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#34;div&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>_this</span>.<span style=color:#a6e22e>parentNode</span>.<span style=color:#a6e22e>replaceChild</span>(<span style=color:#a6e22e>db_div</span>, <span style=color:#a6e22e>_this</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>db_div</span>.<span style=color:#a6e22e>innerHTML</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>db_html</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>bookShow</span>(<span style=color:#a6e22e>_this</span>, <span style=color:#a6e22e>this_item</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>storage</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#a6e22e>this_item</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>storage</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>str</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>_this</span>.<span style=color:#a6e22e>href</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>db_star</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>ceil</span>(<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>rating</span>.<span style=color:#a6e22e>average</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>db_html</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&lt;div class=&#39;post-preview&#39;&gt;&lt;div class=&#39;post-preview--meta&#39;&gt;&lt;div class=&#39;post-preview--middle&#39;&gt;&lt;h4 class=&#39;post-preview--title&#39;&gt;&lt;a target=&#39;_blank&#39; href=&#39;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>str</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&#39;&gt;《&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>title</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;》&lt;/a&gt;&lt;/h4&gt;&lt;div class=&#39;rating&#39;&gt;&lt;div class=&#39;rating-star allstar&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>db_star</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&#39;&gt;&lt;/div&gt;&lt;div class=&#39;rating-average&#39;&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>rating</span>.<span style=color:#a6e22e>average</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/div&gt;&lt;/div&gt;&lt;time class=&#39;post-preview--date&#39;&gt;作者：&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>author</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &lt;/time&gt;&lt;section style=&#39;max-height:75px;overflow:hidden;&#39; class=&#39;post-preview--excerpt&#39;&gt;&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>summary</span>.<span style=color:#a6e22e>replace</span>(<span style=color:#e6db74>/\s*/g</span>, <span style=color:#e6db74>&#34;&#34;</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;&lt;img referrer-policy=&#39;no-referrer&#39; loading=&#39;lazy&#39; class=&#39;post-preview--image&#39; src=&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>images</span>.<span style=color:#a6e22e>medium</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&gt;&lt;/div&gt;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>db_div</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#34;div&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>_this</span>.<span style=color:#a6e22e>parentNode</span>.<span style=color:#a6e22e>replaceChild</span>(<span style=color:#a6e22e>db_div</span>, <span style=color:#a6e22e>_this</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>db_div</span>.<span style=color:#a6e22e>innerHTML</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>db_html</span>
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><h3 id=一个小结>一个小结</h3><p>把首页的 bber 调用去掉了，没找到好用的滚动插件，也没现成的 json 调取方案。毕竟现在直接拿 Twikoo 的最新评论还是不舒坦！</p></div><span class=post-tags>#<a href=https://yuranh211.github.io/tags/%E6%8A%98%E8%85%BE/>折腾</a>&nbsp;
</span><script type=module src="/emaction.js?v=2308072"></script><emoji-reaction theme=system class=reaction endpoint=https://api-emaction.immmmm.com reacttargetid=immmmm-hi-javascript></emoji-reaction><div class=clear></div><div class=pagination><div class=pagination__title><a class=pagination__title-h href=https://github.com/lmm214/immmmm/edit/master/content/posts/coding/hi-javascript.md target=_blank rel=noopener>阅读更多</a><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://yuranh211.github.io/hi-docsify/><span class=button__icon>←</span>
<span class=button__text>Hi，Docsify</span>
</a></span><span class="button next"><a href=https://yuranh211.github.io/twikoo-by-docker/><span class=button__text>宝塔 Docker 部署 Twikoo 评论系统</span>
<span class=button__icon>→</span></a></span></div></div><div class=pagination__title><span class=pagination__title-h>欢迎评论</span><hr></div><div id=tcomment></div><script src=/twikoo1629.js></script><script>twikoo.init({envId:"https://tk.edui.fun/",el:"#tcomment"})</script></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright-font"><span>共 225001 字<br><span id=wowBook></span></span></div><a class=dark-wormhole href=https://www.foreverblog.cn/go.html target=_blank><img src=/wormhole_1.gif alt style=width:auto;height:32px title=穿梭虫洞-随机访问十年之约友链博客> </a><a class=light-wormhole href=https://www.foreverblog.cn/go.html target=_blank><img src=/wormhole_3.gif alt style=width:auto;height:32px title=穿梭虫洞-随机访问十年之约友链博客></a><div class=copyright><span>© 2024 Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a> Theme by <a href=https://twitter.com/panr target=_blank rel=noopener>Panr</a></span></div></div></footer><script>var wowJSWord=22;const gradeChart=[{minpercent:40,letter:"写完一本我国著名的</br>四大名著了！"},{minpercent:35,letter:"写完一本 东野圭吾 的</br>《白夜行》了！"},{minpercent:34,letter:"写完一本 雨果 的</br>《巴黎圣母院》了！"},{minpercent:32,letter:"写完一本 艾米莉·勃朗特 的</br>《呼啸山庄》了！"},{minpercent:31,letter:"写完一本 阿来 的</br>《尘埃落定》了！"},{minpercent:30,letter:"写完一本 茅盾 的</br>《子夜》了！"},{minpercent:28,letter:"写完一本 张炜 的</br>《古船》了！"},{minpercent:25,letter:"写完一本 钱钟书 的</br>《围城》了！"},{minpercent:23,letter:"写完一本 简·奥斯汀 的</br>《傲慢与偏见》了！"},{minpercent:22,letter:"写完一本 莫泊桑 的</br>《一生》了！"},{minpercent:21,letter:"写完一本 东野圭吾 的</br>《解忧杂货店》了！"},{minpercent:20,letter:"写完一本 巴金 的</br>《寒夜》了！"},{minpercent:19,letter:"写完一本 亚米契斯 的</br>《爱的教育》了！"},{minpercent:18,letter:"写完一本 沈从文 的</br>《边城》了！"},{minpercent:17,letter:"写完一本 马克·吐温 的</br>《汤姆·索亚历险记》了！"},{minpercent:16,letter:"写完一本 曹禺 的</br>《日出》了！"},{minpercent:15,letter:"写完一本 伯内特 的</br>《秘密花园》了！"},{minpercent:14,letter:"写完一本 史铁生 的</br>《宿命的写作》了！"},{minpercent:13,letter:"写完一本 曹禺 的</br>《雷雨》了！"},{minpercent:12,letter:"写完一本 余华 的</br>《活着》了！"},{minpercent:11,letter:"写完一本 鲁迅 的</br>《彷徨》了！"},{minpercent:10,letter:"写完一本 马克·吐温 的</br>《王子与乞丐》了！"},{minpercent:9,letter:"写完一本 林海音 的</br>《城南旧事》了！"},{minpercent:7,letter:"写完一本 鲁迅 的</br>《呐喊》了！"},{minpercent:5,letter:"写完一本 埃克苏佩里 的</br>《小王子》了！"},{minpercent:0,letter:"还在努力更新中..</br>加油！加油啦！"}],getLetterGrade=e=>{const t=gradeChart.find(t=>e>=t.minpercent);return t.letter};document.getElementById("wowBook").innerHTML=getLetterGrade(wowJSWord)</script><script type=text/javascript src=/theme-main-1.js></script><script type=text/javascript src=/lately.min.js></script><script type=text/javascript src=/view-image.js></script><script type=text/javascript src="/theme-lmm.js?v=230824"></script><script type=text/javascript src=/pangu.min.js></script><script>document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script></div></body></html>