---
title: 'Lili-Docs搬砖中'
date: 2022-09-22
tags: [折腾]
draft: false
hideInList: false
feature: https://s2.loli.net/2022/09/22/9uaRzvxgT8YBF6y.png
isTop: false
---
昨天发布 docsify 做的文档站点 [Lili-Docs](http://docs.lillianwho.com/#/) 之后，还有一些未完成的事项在记挂着。

<!--more-->

比如：
- 想加个Twikoo 评论
- 访客统计
- 站内搜索
- 本地修改自动上传到线上

后来自己访问网站的时候，又发现根目录的 README.md 不能为空，因为封面和首页是连着的，封面看上去好看，往下滑就是首页的内容，如果首页为空，就会显示404页面。

docsify那篇教程也不能放在根目录，会一起读取到，给显示到页面，很不符合我的站点逻辑，于是单独建了文件夹放。这么一搞，晚上的时候又觉得在一个文档中有点太长了，可以拆分开。于是就继续整文档......

整理文档也是会上瘾的，一旦开始就停不下来。因为开始意味着架设一个框架，而我喜欢构建系统，还有把空缺补完整的强迫症。

要符合逻辑，要优雅。

于是一个网站雏形扔到线上之后，不意味着结束，而是开始，这里补一点，那里调一点。

## 添加评论，未成功

看了 [hi-docsify](https://immmmm.com/hi-docsify/) 这篇教程后，Twikoo 倒是被加载出来了，但是样式不知道为什么有些错乱，没解决，暂时搁置。

访客统计可以直接用 Twikoo 的，等处理 Twikoo 时一起搞。

## 站内搜索，奇怪的状况

站内搜索是用的官方提供的插件，可是加载上之后，上方导航栏不见了...... 莫名其妙，不解其意

还有更奇妙的，或许是我少了什么设置，我试了在一个目录上搜索，确定有的关键词，没搜到。而且搜索过后，整个页面无法滑动了。之后有空可能要再找找其他人的教程，官方的太简单直接了，中文文档还是个不存在的页面，机翻可能不准。

## 本地修改自动上传到线上

有两种方案：
- git hook ，本地代码提交，服务器的hook监测到有提交就拉取代码。
- vscode的sftp插件，直接用sftp上传到服务器。
	- 教程：https://blog.csdn.net/weixin_39218464/article/details/120608316

我暂时用了第二种方案。这是我的 sftp.json 配置：

```json
{
    "name": "docs",
    "host": "1**.***.***.**4",
    "protocol": "sftp",
    "port": 22,
    "username": "root", 
    "password":"服务器密码",
    "remotePath": "线上服务器文件夹地址",
    "uploadOnSave": true,
    "watcher": {
        "files": "*",
        "autoUpload": true,
        "autoDelete": true
    }
}
```

- uploadOnSave：true 代表本地更新(update)文件会自动同步到远程文件（不会同步重命名文件和删除文件）
- watcher：监听器（可以重命名文件和删除文件）
    - autoUpload：修改和重命名文件都会被监听。如果为false，那么本地文件重命名的时候，会被当做新文件上传到远程服务器。
    - autoDelete：文件删除会远程也删除。如果为false，就是本地删除文件但远程文件不会被删除。

## 线上服务器读取不到根目录的readme.md

导致主页显示一直404 ，上网搜索了一下，发现这个问题挺普遍的，是服务器配置的问题，README.md 被设置到忽略文件里了，删除就解决了。

![](https://s2.loli.net/2022/09/22/kVWc74rFaxLmusn.png)

## 搬运笔记

把当前obsidian 知识库里的笔记，陆续搬到 Lili-Docs 网站上。放了 Python 基础语法，和一点点正在学的 NodeJS.

不得不说，文档类网站写教程写学习笔记都超好用！给自己看也非常直观。直接一个文件夹下放一个项目的多个笔记，而且每一章节单独写，再编辑左侧导航栏，条理清晰。在ob里面，文件是散列的，正缺一个可以组织笔记结构的功能，当前很多用户大概是用的手写MOC。用 docsify 这个问题就解决了。

我干脆也不在原先的知识库记技术学习笔记了，直接把 docsify项目下的 docs 文件夹当做一个库，在obsidian 中打开。在obsidian 中写笔记，由 docsify 展现组织好结构和顺序的笔记，美滋滋。

导航条长了不好看，于是做了折叠导航栏。比较简单，用 Markdown 的多级列表语法就可以了。甚至左侧的目录也可以用这种方式构建。

![](https://s2.loli.net/2022/09/22/9uaRzvxgT8YBF6y.png)



## 后记

还有一些待处理的，当前时间有限，只能先搁置了。

上个星期和 Docker 杠上了，一直挂载不成功，结果以不正确的坐姿坐了太久，第二天就体会到了腰间盘突出患者的痛苦。偏偏从那天开始，专注的事情有点多，往往在桌子前面一坐就是五六个小时，腰椎反反复复，恶化，好转，又恶化。忽然就明白为什么人工力学椅子大几万能卖的出去了，程序员太需要了。

有时候不是你想不想一直坐着，而是一直有问题不解决，哪能站起来就走人呢？太挫败了。

所以现在我只能尽量坐一个小时就起来休息休息，时间更觉短缺。做完一件事，一天就已经过去了，日夜交替，快得让人抓不住。


