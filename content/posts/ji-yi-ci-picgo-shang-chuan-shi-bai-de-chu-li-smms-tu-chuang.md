---
title: '记一次picgo上传失败的处理-SM.MS图床'
date: 2022-09-18
tags: [折腾]
draft: false
hideInList: false
feature: https://s2.loli.net/2022/09/21/PBxXcsSJeUKf6dM.png
isTop: false
---

自从去年在obsidian中用了自动上传插件，配合picgo+SM.MS图床，解决了自动上传图片之后，很长一段时间这都是我的ob标配。

<!--more-->


用图床的好处是解放本地内存。如果库文件的体积太大，同步到移动端会有点让人头疼，那些图片会和手机本地的相册混在一起，不是那么美观和优雅，更别说还会占用手机内存了。

大概是从上个月开始，忽然自动上传图片会失败。

列举了可能导致图片上传失败的问题列表：
- ob插件bug
- picgo出了问题。
    - picgo本身的问题
    - picgo配置的问题
    - 图床配置里，SM.MS的配置出了问题
- SM.MS 本身服务不可用了

接下来一一检测：
- 检查了picgo客户端，直接上传图片，一样会失败。排除了是ob插件的问题。
- 又登入到SM.MS官网，测试直接上传图片，正常上传成功了。排除了SM.MS服务不可用的可能性。
- 那么问题出在picgo。
    - 首先更新到最新版本，测试上传依然失败。github主页也没有出现说新版本不可用，说明不是picgo客户端本身出了问题。
    - 检查picgo设置，原本的设置没动过，但还是按照网上说的把Sever选项关闭再重新打开。设置后测试上传，依然失败。
    - 检查picgo里SM.MS的图床设置，到官网重新生成token，排除token失效的可能。更换token后，依然失败。

全都一一排除之后，实在找不到原因。最后在网上看到一篇picgo+SM.MS，用的是picgo里一个插件进行的SM.MS图床配置。抱着试试看的心理安装了看看，**测试上传图片成功了**。

虽然很不解为什么，插件看上去也没有picgo自带的设置看上去正式，但是自带的SM.MS 图床设置确实不可用了，而这个插件可以。

![](https://s2.loli.net/2022/09/15/VPhwtCcvG8ZIFYO.png)