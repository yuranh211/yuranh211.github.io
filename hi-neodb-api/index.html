<!doctype html><html lang=en><head><title>Hi, NeoDB :: 木木木木木</title>
<meta charset=utf-8><meta charset=UTF-8><meta name=renderer content="webkit"><meta name=force-rendering content="webkit"><meta name=referrer content="no-referrer"><meta http-equiv=X-UA-Compatible content="IE=Edge,chrome=1"><script>(!1||!!window.MSInputMethodContext&&!!document.documentMode)&&document.write('<script id="_iealwn_js" data-outver="11" src="https://support.dmeng.net/ie-alert-warning/latest.js"></script>')</script><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="neodb.social 是一个致力于为联邦宇宙居民提供一个自由开放互联的书籍、电影、音乐和游戏收藏评论空间。NeoDB的源代码来自NiceDB，NiceDB由里瓣社区众筹开发。
可以理解为开源版本的某瓣，具体使用参考官方教程（这里），数据迁移教程（这里）。
个人主页：lmm214@mastodon.social
"><meta name=keywords content><link rel=alternate type=application/rss+xml href=/feed title=木木木木木><link rel=canonical href=https://yuranh211.github.io/hi-neodb-api/><link rel=stylesheet href=/LXGWNeoZhiSong/lxgwneozhisong.css media=print onload='this.media="all"'><link rel=stylesheet href="/theme-lmm.css?v=2401-1"><link rel="shortcut icon" href=https://yuranh211.github.io/favicon.ico><link rel=apple-touch-icon href=https://yuranh211.github.io/favicon.ico><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=apple-mobile-web-app-title content="木木木木木"><link rel=bookmark href=https://yuranh211.github.io/favicon.ico><link rel=apple-touch-icon-precomposed sizes=180x180 href=https://yuranh211.github.io/favicon.ico><meta property="og:title" content="Hi, NeoDB"><meta property="og:description" content="neodb.social 是一个致力于为联邦宇宙居民提供一个自由开放互联的书籍、电影、音乐和游戏收藏评论空间。NeoDB的源代码来自NiceDB，NiceDB由里瓣社区众筹开发。
可以理解为开源版本的某瓣，具体使用参考官方教程（这里），数据迁移教程（这里）。
个人主页：lmm214@mastodon.social"><meta property="og:type" content="article"><meta property="og:url" content="https://yuranh211.github.io/hi-neodb-api/"><meta property="og:image" content="https://r2.immmmm.com/2023/07/neodb-2.png"><script defer src=https://views.edui.fun/lmm214.js data-website-id=ddb6c6c5-cb77-4e2d-a3fc-768f2957f78f></script><script src=/quicklink.umd.js></script><script>window.addEventListener("load",()=>{quicklink.listen()})</script><link rel=prefetch href=https://yuranh211.github.io/new-mac-101/><link rel=prefetch href=https://yuranh211.github.io/bbs-by-memos/></head><body><script>checkNightMode();function checkNightMode(){var e=localStorage.getItem("theme")||"";e=="dark"?document.body.classList.add("dark"):(e==null||e=="undefined"||e=="")&&(matchMedia("(prefers-color-scheme: dark)").matches?document.body.classList.add("dark"):matchMedia("(prefers-color-scheme: light)").matches&&document.body.classList.remove("dark"))}</script><div class=container><header class=header><span class=header__inner><a href=https://yuranh211.github.io/ class=logo style=text-decoration:none><span class=logo__text>木木木木木</span>
<span class=logo__cursor></span>
</a><span class=header__right><nav class="menu hidden"><ul class="menu__inner menu__inner--desktop"><li><a href=/bbs/>哔哔</a></li><li><a href=/friends/>友圈</a></li><li><a href=/goods/>好物</a></li><li><a href=/archives/>归档</a></li><li><a href=https://edui123.com/>导航</a></li><li><a href=/about/>关于</a></li><li><a href=javascript:; onclick=randomPost() title=随机访问一篇文章><svg t="1660103436159" class="icon search-box-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="1184" width="32" height="32"><path d="M421.376 481.28s117.248 24.576 175.104-8.704c0 0-89.6 70.144-89.6 166.4.512-.512-8.192-121.344-85.504-157.696zm17.408 487.936s68.608 6.656 68.608-80.896c0 0 3.072 88.576 65.024 78.336.0.512-50.688 22.016-133.632 2.56zM161.28 238.08s-30.208 65.536 11.264 91.648c0 0-67.072-17.408-81.408 37.376.0.0 8.704-82.944 70.144-129.024zM857.6 227.328s49.152 50.176 1.024 81.408c0 0 58.88-18.432 66.56 36.352.0.0 5.12-69.632-67.584-117.76z" p-id="1185"/><path d="M443.392 970.752c-5.632.0-10.752-1.024-15.36-3.072L157.184 810.496l-1.536-1.024s-1.024-1.024-4.608-2.56c-51.2-29.184-62.976-94.208-65.536-120.832V386.56c0-3.072.512-7.168 1.024-11.264l.512-3.584 1.024-2.56c19.456-50.688 76.8-51.2 103.936-44.032l-1.536 5.632 4.096-6.144L476.16 486.4l18.944 37.888c20.992 36.864 29.184 77.824 32.768 99.84v258.048c-4.608 56.32-36.864 76.288-55.808 82.944-1.024.512-15.36 5.632-28.672 5.632zM181.248 774.656l263.168 152.576c12.288-.512 36.864-6.656 40.448-48.128V628.736c-4.608-31.744-20.992-103.936-72.192-128L322.56 445.44l1.536 3.072L181.76 366.08c-2.048-.512-40.448-9.216-52.736 15.872-.512 2.56-.512 4.608-.512 6.144v294.4c1.536 16.896 9.728 67.072 43.52 86.528 3.584 2.048 6.656 4.096 9.216 5.632z" p-id="1186"/><path d="M837.632 212.992c6.656 4.096 12.8 7.168 18.432 10.752l1.536 1.024 1.536 1.536c5.12 4.096 10.752 9.216 16.384 15.36 6.144 11.776 5.632 33.28 4.608 49.152-1.024 12.288-6.656 30.208-26.624 44.544l-1.024.512-247.808 156.672c-26.624 14.336-62.976 18.432-96.256 18.432-40.96.0-77.824-6.656-89.088-8.704l-3.072-.512-245.248-142.336c-39.424-29.696-28.16-85.504-15.36-113.664l2.56-6.144 263.68-166.912c29.184-14.336 104.448-43.008 173.056-1.024 3.584 2.56 58.368 34.304 119.296 69.632M431.616 460.8c40.448 7.168 114.176 13.824 152.576-6.144L828.928 299.52c7.168-5.632 8.192-10.24 8.704-12.8 1.024-11.264-9.728-26.624-15.36-32.768-55.808-32.256-243.712-141.312-250.368-145.408-49.664-30.72-107.008-9.216-130.048 2.56L192.512 268.8c-4.096 12.288-12.288 42.496 3.584 55.808L431.616 460.8z" p-id="1187"/><path d="M831.488 299.008c4.096-1.024 38.4-11.264 66.048 6.144 7.168 4.608 17.92 11.776 24.064 24.576 1.024 5.632 4.096 10.752 4.608 16.896v2.048l-1.024 323.072c-5.12 35.328-22.528 91.648-77.312 125.44l-5.12 3.584h-1.024L579.584 966.656l-4.608.512c-4.096.512-8.704 1.024-12.8 1.024-15.872.0-30.208-5.12-41.984-14.848-24.576-20.48-32.768-55.808-35.328-73.728l-1.024-252.928h1.536c6.144-96.768 88.576-164.864 96.768-171.008l-.512-.512L829.44 299.52M528.384 867.328c.512 10.24 5.12 41.472 19.968 53.76 3.072 2.56 7.68 5.632 16.384 5.12L829.44 758.272c56.32-38.4 53.76-115.712 53.76-116.224l-.512-32.256 1.024-250.368h-.512c-1.536-12.8-7.168-16.384-8.704-17.408-8.704-5.632-23.552-3.072-28.672-2.048L610.304 488.96c-1.024.512-80.896 65.024-80.896 149.504h-1.536l.512 228.864zM435.2 264.192c0 27.648 31.744 50.176 71.168 50.176s71.168-22.528 71.168-50.176-31.744-50.176-71.168-50.176S435.2 236.544 435.2 264.192z" p-id="1188"/><path d="M663.552 782.848c0 30.72-22.528 67.072-49.664 80.384-27.648 13.824-50.176-.512-50.176-31.232s22.528-67.072 50.176-80.384c27.136-13.824 49.664.0 49.664 31.232zM760.32 602.624c0 30.72-22.528 67.072-49.664 80.384-27.648 13.824-49.664-.512-49.664-31.232s22.528-67.072 49.664-80.384c27.136-13.824 49.664.512 49.664 31.232zM867.84 428.032c0 30.72-22.528 67.072-49.664 80.384C790.528 522.24 768 507.904 768 477.184s22.528-67.072 50.176-80.384c27.136-13.824 49.664.0 49.664 31.232zM270.848 538.112c0 30.72-22.016 41.984-48.64 24.576-27.136-16.896-48.64-55.808-48.64-86.528s22.016-41.984 48.64-24.576c26.624 16.896 48.64 55.808 48.64 86.528zm161.28 285.184c0 30.72-22.016 41.984-48.64 24.576-26.624-17.408-48.64-55.808-48.64-86.528s22.016-41.984 48.64-24.576c26.624 16.896 48.64 55.808 48.64 86.528z" p-id="1189"/></svg></a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/bbs/>哔哔</a></li><li><a href=/friends/>友圈</a></li><li><a href=/goods/>好物</a></li><li><a href=/archives/>归档</a></li><li><a href=https://edui123.com/>导航</a></li><li><a href=/about/>关于</a></li></ul></nav><span class="menu-trigger hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class="post coding"><div class=breadcrumb><li><a href=https://yuranh211.github.io/>首页</a></li><li><a href=https://yuranh211.github.io/posts/>文章</a></li><li><a href=https://yuranh211.github.io/posts/coding/>折腾</a></li><li class=active><a href=https://yuranh211.github.io/hi-neodb-api/>Hi, NeoDB</a></li></div><h2 class=post-title><a href=https://yuranh211.github.io/hi-neodb-api/>Hi, NeoDB</a></h2><div class=post-meta><span class=post-date>2023-07-11 19:18:47</span><span> / <span id=twikoo_visitors>0</span> 阅读</span></div><img loading=lazy decoding=async src=https://r2.immmmm.com/2023/07/neodb-2.png class=post-cover><div class=post-ai onclick=geminiAI()><img alt="Static Badge" src="https://api-shields.edui.fun/badge/Gemini-文章摘要-blue.svg?logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Im0yMS42NCAzLjY0bC0xLjI4LTEuMjhhMS4yMSAxLjIxIDAgMCAwLTEuNzIgMEwyLjM2IDE4LjY0YTEuMjEgMS4yMSAwIDAgMCAwIDEuNzJsMS4yOCAxLjI4YTEuMiAxLjIgMCAwIDAgMS43MiAwTDIxLjY0IDUuMzZhMS4yIDEuMiAwIDAgMCAwLTEuNzJNMTQgN2wzIDNNNSA2djRtMTQgNHY0TTEwIDJ2Mk03IDhIM20xOCA4aC00TTExIDNIOSIvPjwvc3ZnPg=="></div><style>@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}.post-ai-result svg{animation:spin 1s infinite linear}</style><script>let postAI=document.querySelector(".post-ai"),postTile=document.querySelector(".post-title a").textContent;async function geminiAI(){postAI.insertAdjacentHTML("afterend",'<div class="post-ai-result"><svg xmlns="http://www.w3.org/2000/svg" width="1.5rem" height="1.5rem" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 1 1-6.219-8.56"/></svg></div>'),postAI.classList.add("noclick");let e="https://api-gemini.immmmm.com/v1/chat/completions";try{let t=document.querySelector(".post-ai-result"),n=document.querySelector(".post-content").textContent,s=n.replace(/\n/g,"").replace(/[ ]+/g," ").replace(/<pre>[\s\S]*?<\/pre>/g,"").substring(0,3e4),o=`文章标题：${postTile}，具体内容：${s}`;const i=await fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({model:"gemini-pro",messages:[{role:"system",content:`You are a highly skilled AI trained in language comprehension and summarization. I would like you to read the text delimited by triple quotes and summarize it into a concise abstract paragraph. Aim to retain the most important points, providing a coherent and readable summary that could help a person understand the main points of the discussion without needing to read the entire text. Please avoid unnecessary details or tangential points.
          Only give me the output and nothing else. Do not wrap responses in quotes. Respond in the Chinese language.`},{role:"user",content:o}],temperature:.7,stream:!0})}),a=i.body.getReader();for(;!0;){const{value:n,done:s}=await a.read();if(s)break;const e=(new TextDecoder).decode(n),o=e.match(/DONE/);if(!o){const s=JSON.parse(e.substring(5)),n=s.choices[0].delta.content;n.length>0&&(t.textContent+=n)}}}catch(e){document.querySelector(".post-ai-result").remove(),console.log(e)}}</script><div class=post-content><p><a href=https://neodb.social/ target=_blank rel="noopener nofollow noreferrer">neodb.social</a> 是一个致力于为联邦宇宙居民提供一个自由开放互联的书籍、电影、音乐和游戏收藏评论空间。NeoDB的源代码来自NiceDB，NiceDB由里瓣社区众筹开发。</p><p>可以理解为开源版本的某瓣，具体使用参考官方教程（<a href=https://about.neodb.social/doc/howto/ target=_blank rel="noopener nofollow noreferrer">这里</a>），数据迁移教程（<a href=https://about.neodb.social/doc/doufen/ target=_blank rel="noopener nofollow noreferrer">这里</a>）。</p><p>个人主页：<a href=https://neodb.social/users/lmm214@mastodon.social/ target=_blank rel="noopener nofollow noreferrer">lmm214@mastodon.social</a></p><p>最早听闻 NeoDB 来自 <a href=https://eallion.com/ target=_blank rel="noopener nofollow noreferrer">@eallion</a>，那时某瓣标记记录还可以通过第三方 Docker API 和 GitHub Actions 获取调用。几天前，小伙伴发现图挂了一片一片一大片，哎，换轮子！</p><h3 id=hugo-neodb-单条短代码>Hugo NeoDB 单条短代码</h3><p>支持书、电影、剧集、游戏、播客，也支持豆瓣页面链接，源码见 <a href=https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/shortcodes/neodb.html target=_blank rel="noopener nofollow noreferrer">shortcodes/neodb.html</a>，</p><div class=db-card><div class=db-card-subject><div class=db-card-post><img loading=lazy decoding=async referrerpolicy=no-referrer src=https://cors.immmmm.com/https://neodb.social/m/item/doubanbook/2023/03/26/0ac4642d-4552-4a23-884e-5abc9d3f2864.jpg></div><div class=db-card-content><div class=db-card-title><a href=https://neodb.social/book/5SJvkuHNGL4XhBddW2J4EJ class=cute target=_blank rel=noreferrer>我在北京送快递</a></div><div class=rating><span class=allstardark><span class=allstarlight style=width:79%></span></span><span class=rating_nums>7.9</span></div><div class=db-card-abstract>进入社会工作至今的十年间，胡安焉走南闯北，辗转于广东、广西、云南、上海、北京等地，做过快递员、夜班拣货工人、便利店店员、保安、自行车店销售、服装店导购、加油站加油工……他将日常的点滴和工作的甘苦化作真诚的自述，记录了一个平凡人在生活中的辛劳、私心、温情、正气。
在物流公司夜间拣货的一年，给他留下了深刻的生理印记：“这份工作还会令人脾气变坏，因为长期熬夜以及过度劳累，人的情绪控制力会明显下降……我已经感到脑子不好使了，主要是反应变得迟钝，记忆力开始衰退。”在北京送快递的两年，他“把自己看作一个时薪30元的送货机器，一旦达不到额定产出值就恼羞成怒、气急败坏”……
但他最终认识到，怀着怨恨的人生是不值得过的。这些在事后追忆中写成的工作经历，渗透着他看待生活和世界的态度与反思，旨在表达个人在有限的选择和局促的现实中，对生活意义的直面和肯定：生活中许多平凡隽永的时刻，要比现实困扰的方方面面对人生更具有决定意义。</div></div><div class=db-card-cate>book</div></div></div><div class=db-card><div class=db-card-subject><div class=db-card-post><img loading=lazy decoding=async referrerpolicy=no-referrer src=https://cors.immmmm.com/https://neodb.social/m/movie/2021/09/154f638fbd-6de6-4c12-92b1-295005155f66.jpg></div><div class=db-card-content><div class=db-card-title><a href=https://neodb.social/movie/1bgVODaWCBKlCQ1AuGlLzC class=cute target=_blank rel=noreferrer>椒麻堂会</a></div><div class=rating><span class=allstardark><span class=allstarlight style=width:88%></span></span><span class=rating_nums>8.8</span></div><div class=db-card-abstract>演员过日子，举手投足就是一幕幕川剧，癫狂、苦涩、地道，烟火气刺鼻。百年的生活史，大大小小，就这样在舞台上下踉跄展开。</div></div><div class=db-card-cate>movie</div></div></div><div class=db-card><div class=db-card-subject><div class=db-card-post><img loading=lazy decoding=async referrerpolicy=no-referrer src=https://cors.immmmm.com/https://neodb.social/m/item/doubanmovie/2023/06/30/b4a8cd20-45c3-47dc-940f-fe23605189b9.jpg></div><div class=db-card-content><div class=db-card-title><a href=https://neodb.social/tv/season/5es8Us1HHOhVz3UlLmTspr class=cute target=_blank rel=noreferrer>羊毛战记 第一季</a></div><div class=rating><span class=allstardark><span class=allstarlight style=width:79%></span></span><span class=rating_nums>7.9</span></div><div class=db-card-abstract>该剧基于休·豪伊所著同名畅销科幻系列小说改编，设定在被破坏、有毒的未来，数百层楼深的一个巨大地下筒仓中存在一个 社区，男人和女人生活在一个充满规章制度的社会里，凡是和“出去”有关的一切都成为致命禁忌。
丽贝卡·弗格森饰演独立而勤奋的工程师朱丽叶，她也担任执行制作人。蒂姆·罗宾斯饰演IT主管伯纳德，加入了朱丽叶的队伍。</div></div><div class=db-card-cate>tv</div></div></div><div class=db-card><div class=db-card-subject><div class=db-card-post><img loading=lazy decoding=async referrerpolicy=no-referrer src=https://cors.immmmm.com/https://neodb.social/m/item/doubangame/2024/07/16/1f0609c0-b9df-4fa3-a327-04ad374bcad4.jpg></div><div class=db-card-content><div class=db-card-title><a href=https://neodb.social/game/5pvs201VxbkldH4LOEtDVt class=cute target=_blank rel=noreferrer>空洞骑士</a></div><div class=rating><span class=allstardark><span class=allstarlight style=width:94%></span></span><span class=rating_nums>9.4</span></div><div class=db-card-abstract>《空洞骑士》是一部风格经典、跨越庞大且交错相通世界的 2D 动作冒险游戏。探索扭曲的洞穴、古老的城市和致命的废墟；对抗邪恶的生物，结识友好又奇异的臭虫；进入王国，去破解
远古谜题吧！
《空洞骑士》的世界以生动、多变的细节灵活展现，其洞穴里充满着奇异又可怕的生物，每个画面都以传统的 2D 风格手工打造。
你将发现的每一个新领域都非常独特和奇怪，充满了新的生物和角色。欣赏风景并发现隐藏在常规道路下的新奇迹。
如果你喜欢经典的游戏、可爱却又令人毛骨悚然的角色、史诗般的冒险和美丽的哥特式世界，《空洞骑士》在这里等你来战！</div></div><div class=db-card-cate>game</div></div></div><div class=db-card><div class=db-card-subject><div class=db-card-post><img loading=lazy decoding=async referrerpolicy=no-referrer src=https://cors.immmmm.com/https://neodb.social/m/item/rss/2023/02/02/bc453e23-f725-44da-b9cf-568393ae5b44.jpg></div><div class=db-card-content><div class=db-card-title><a href=https://neodb.social/podcast/5tlY7lSI0WfXcoHstz7u4S class=cute target=_blank rel=noreferrer>黑水公园</a></div><div class=rating><span class=allstardark><span class=allstarlight style=width:68%></span></span><span class=rating_nums>6.8</span></div><div class=db-card-abstract>黑水公园是一档以电影、剧集、科幻、动漫为载体，畅谈人生的趣谈节目。（金花微信：zhaotie6969zhaotie；金花微博：黑水公园_金花）</div></div><div class=db-card-cate>podcast</div></div></div><p>如下调用(去除反斜杠)：</p><pre tabindex=0><code>\{\{&lt; neodb &#34;https://neodb.social/book/5SJvkuHNGL4XhBddW2J4EJ&#34; &gt;\}\}
\{\{&lt; neodb &#34;https://neodb.social/movie/1bgVODaWCBKlCQ1AuGlLzC&#34; &gt;\}\}
\{\{&lt; neodb &#34;https://neodb.social/tv/season/5es8Us1HHOhVz3UlLmTspr&#34; &gt;\}\}
\{\{&lt; neodb &#34;https://neodb.social/game/5pvs201VxbkldH4LOEtDVt&#34; &gt;\}\}
\{\{&lt; neodb &#34;https://neodb.social/podcast/5tlY7lSI0WfXcoHstz7u4S&#34; &gt;\}\}
</code></pre><p>豆瓣页面链接调用：</p><div class=db-card><div class=db-card-subject><div class=db-card-post><img loading=lazy decoding=async referrerpolicy=no-referrer src=https://cors.immmmm.com/https://neodb.social/m/item/doubanbook/2023/05/29/cc933957-9ec9-4c69-a74d-23f7e3a52ef0.jpg></div><div class=db-card-content><div class=db-card-title><a href=https://book.douban.com/subject/36328704/ class=cute target=_blank rel=noreferrer>太白金星有点烦</a></div><div class=rating><span class=allstardark><span class=allstarlight style=width:81%></span></span><span class=rating_nums>8.1</span></div><div class=db-card-abstract>太白金星李长庚最近有点烦。
天庭和西天联合推出了“西天取经”的重大项目，他受命策划九九八十一难，确保唐僧能安全走完流程，平稳取经成佛。老神仙本以为一切尽在掌控中，谁知天大的麻烦才刚刚开始：费用报销、工作汇报、人事安排、各路大仙塞来的条子、各地妖怪暗藏的心思，捋不出的千头万缕，做不完的琐碎繁杂……当大闹天宫的真相重新浮出水面，牵扯出无数因果，李长庚发觉自己成就金仙的道路越加渺茫。
【编辑推荐】
这是每一个成年人应该重读的西游故事。
太白金星李长庚最近有点烦。天庭和西天联合推出了“西天取经”的重大项目，他受命策划九九八十一难，确保项目无虞。老神仙本以为一切尽在掌控中，谁知天大的麻烦才刚刚开始。
项目过程中，如何报销活动费用？如何写工作汇报？如何平衡不同上级的诉求？如何应对突发状况？如何解决人事纠纷？一系列问题在不改变经典著作《西游记》结局的基础上展开了丰富有趣的职场生态，即便李长庚锦囊无数，也不免常常陷入焦虑。
都说神仙要“超脱因果，太上忘情”，都说不要在职场里动感情，太白金星却说，“很多人间执念我们无法理解，但不代表那些痛苦就不存在。”即使得了“仙”“佛”之号，依旧抛不下一个人字，有人，就有抛不下的牵挂、因果与苦乐得失。
打碎无意义的追逐，才是真的得道。
延续《长安的荔枝》小开本双封设计，随书附10张著名画家施晓颉所绘创意插图。
【媒体推荐】
地下取经队伍降妖除魔百般威武，天上神界仙界各怀心思斗智斗勇。现代视角另类演绎西游故事，就算成仙也得讲究职场智慧。
——《收获》杂志</div></div><div class=db-card-cate>book</div></div></div><pre tabindex=0><code>\{\{&lt; neodb &#34;https://book.douban.com/subject/36328704/&#34; &gt;\}\}
</code></pre><h3 id=首页近期观影和近期阅读>首页「近期观影」和「近期阅读」</h3><p>整体思路，通过 Cloudflare Workers 发起 Fetch 请求，这样可以避免 <code>Access Token</code> 暴露。</p><p>所以，如下三步走。</p><h4 id=1-获取-access-token>1. 获取 Access Token</h4><p>参考 @eallion <a href=https://eallion.com/neodb_token/ target=_blank rel="noopener nofollow noreferrer">《NeoDB 获取 Access Token》</a>。</p><h4 id=2-新建-cloudflare-workers>2. 新建 Cloudflare Workers</h4><p><code>worker.js</code> 代码如下（记得修改密钥和绑定子域名）：</p><pre tabindex=0><code>const myBearer = &#39;91…………………………………………wi&#39;  //你的密钥

addEventListener(&#39;fetch&#39;, event =&gt; {
  event.respondWith(handleRequest(event.request))
})
 
async function handleRequest(request) {
  const url = new URL(request.url)
  const category = url.pathname.substring(1)
  console.log(category)
  let dbApiUrl = &#39;https://neodb.social/api/me/shelf/complete?category=&#39; + category + &#39;&amp;page=1&#39;
  return fetch(dbApiUrl ,{
    method:&#39;get&#39;,
    headers: {
      &#39;Accept&#39;: &#39;application/json&#39;,
      &#39;Authorization&#39;: &#39;Bearer &#39; + myBearer
    }
  });
}
</code></pre><h4 id=3-hugo-getjson-调取>3. Hugo getJSON 调取</h4><p>核心代码如下：</p><pre tabindex=0><code>{{$movieitems := getJSON &#34;https://db.immmmm.com/movie&#34; }}
{{range $value := $movieitems.data}}
    {{ $item := $value.item }}
    {{ $item.title }}
    ……
{{end}}
</code></pre><p><code>https://db.immmmm.com/movie</code> 获取到的数据其实是</p><p><code>https://neodb.social/api/me/shelf/complete?category=movie&amp;page=1</code></p><h4 id=相关代码备份>相关代码备份</h4><pre tabindex=0><code>/* db-card -------- start*/
.db-card{margin:2rem 3rem;background:#fafafa;border-radius: 4px;box-shadow: 0 1px 2px rgb(0 0 0 / 25%), 0 0 1px rgb(0 0 0 / 25%)}
.db-card-subject{display: flex;align-items:flex-start;line-height:1.6;padding:12px;position:relative;}
.dark .db-card{background:#252627;}
.db-card-content {flex:1 1 auto;}
.db-card-post {width: 96px;margin-right: 15px;display: flex;flex: 0 0 auto;}
.db-card-title {margin-bottom: 5px;font-size: 18px;}
.db-card-title a{text-decoration: none!important}
.db-card-abstract,.db-card-comment{font-size:14px;overflow: hidden;max-height:3rem;}
.db-card-cate{position: absolute;top:0;right:0;background:#f99b01;padding:1px 8px;font-size:small;font-style:italic;border-radius:0 8px 0 8px;text-transform:capitalize;}
.db-card-post img{width: 96px!important;height: 96px!important;border-radius: 4px;-o-object-fit: cover;object-fit: cover;}
.rating{margin: 0 0 5px;font-size:13px;line-height: 1;display: flex;align-items: center;}
.rating .allstardark{position:relative;color: #f99b01;height: 16px;width: 80px;background-size: auto 100%;margin-right: 8px;background-repeat: repeat;background-image: url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxwYXRoIGQ9Ik05MDguMSAzNTMuMWwtMjUzLjktMzYuOUw1NDAuNyA4Ni4xYy0zLjEtNi4zLTguMi0xMS40LTE0LjUtMTQuNS0xNS44LTcuOC0zNS0xLjMtNDIuOSAxNC41TDM2OS44IDMxNi4ybC0yNTMuOSAzNi45Yy03IDEtMTMuNCA0LjMtMTguMyA5LjMtMTIuMyAxMi43LTEyLjEgMzIuOS42IDQ1LjNsMTgzLjcgMTc5LjEtNDMuNCAyNTIuOWMtMS4yIDYuOS0uMSAxNC4xIDMuMiAyMC4zIDguMiAxNS42IDI3LjYgMjEuNyA0My4yIDEzLjRMNTEyIDc1NGwyMjcuMSAxMTkuNGM2LjIgMy4zIDEzLjQgNC40IDIwLjMgMy4yIDE3LjQtMyAyOS4xLTE5LjUgMjYuMS0zNi45bC00My40LTI1Mi45IDE4My43LTE3OS4xYzUtNC45IDguMy0xMS4zIDkuMy0xOC4zIDIuNy0xNy41LTkuNS0zMy43LTI3LTM2LjN6TTY2NC44IDU2MS42bDM2LjEgMjEwLjNMNTEyIDY3Mi43IDMyMy4xIDc3MmwzNi4xLTIxMC4zLTE1Mi44LTE0OUw0MTcuNiAzODIgNTEyIDE5MC43IDYwNi40IDM4MmwyMTEuMiAzMC43LTE1Mi44IDE0OC45eiIgZmlsbD0iI2Y5OWIwMSIvPjwvc3ZnPg==);
}
.rating .allstarlight{position: absolute;left: 0;color: #f99b01;height:16px;overflow: hidden;background-size: auto 100%;background-repeat: repeat;background-image: url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxwYXRoIGQ9Ik05MDguMSAzNTMuMWwtMjUzLjktMzYuOUw1NDAuNyA4Ni4xYy0zLjEtNi4zLTguMi0xMS40LTE0LjUtMTQuNS0xNS44LTcuOC0zNS0xLjMtNDIuOSAxNC41TDM2OS44IDMxNi4ybC0yNTMuOSAzNi45Yy03IDEtMTMuNCA0LjMtMTguMyA5LjMtMTIuMyAxMi43LTEyLjEgMzIuOS42IDQ1LjNsMTgzLjcgMTc5LjEtNDMuNCAyNTIuOWMtMS4yIDYuOS0uMSAxNC4xIDMuMiAyMC4zIDguMiAxNS42IDI3LjYgMjEuNyA0My4yIDEzLjRMNTEyIDc1NGwyMjcuMSAxMTkuNGM2LjIgMy4zIDEzLjQgNC40IDIwLjMgMy4yIDE3LjQtMyAyOS4xLTE5LjUgMjYuMS0zNi45bC00My40LTI1Mi45IDE4My43LTE3OS4xYzUtNC45IDguMy0xMS4zIDkuMy0xOC4zIDIuNy0xNy41LTkuNS0zMy43LTI3LTM2LjN6IiBmaWxsPSIjZjk5YjAxIi8+PC9zdmc+);}
@media (max-width:550px) {
	.db-card{margin:0.8rem 1rem;}
	.db-card-comment{display: none;}
}
/* db-card -------- end */
</code></pre><pre tabindex=0><code>{{$movieitems := getJSON &#34;https://db.immmmm.com/movie&#34; }}
&lt;div class=&#34;douban border-top sc-ksluID gFnzgG&#34;&gt;
  &lt;h3&gt;&lt;a href=&#34;/movies/&#34;&gt;近期观影&lt;/a&gt;&lt;/h3&gt;
    &lt;div class=&#34;items sc-dIsUp fIuTG&#34;&gt;
        {{range $value := first 5 $movieitems.data}}
          {{ $item := $value.item }}
          {{ $itemRating := 0 }}{{ with $item.rating }}{{ $itemRating = . }}{{ end }}
          &lt;div class=&#34;dfdORB&#34;&gt;
            &lt;div class=&#34;sc-hKFxyN HPRth&#34;&gt;&lt;div class=&#34;lazyload-wrapper&#34;&gt;&lt;img class=&#34;avatar&#34; src=&#34;{{ $item.cover_image_url }}&#34; referrer-policy=&#34;no-referrer&#34; loading=&#34;lazy&#34; alt=&#34;&#34;  title=&#34;{{ $item.title }}&#34; width=&#34;150&#34; height=&#34;220&#34;&gt;&lt;/div&gt;&lt;/div&gt;
            &lt;div class=&#34;sc-fujyAs eysHZq&#34;&gt;
                &lt;div class=&#34;rating&#34;&gt;&lt;span class=&#34;allstardark&#34;&gt;&lt;span class=&#34;allstarlight&#34; style=&#34;width:{{ mul 10 $itemRating }}%&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;rating_nums&#34;&gt;{{ $itemRating }}&lt;/span&gt;&lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&#34;sc-iCoGMd kMthTr&#34;&gt;&lt;a rel=&#34;noreferrer&#34; href=&#34;https://neodb.social{{ $item.url }}&#34; target=&#34;_blank&#34;&gt;{{ $item.title }}&lt;/a&gt;&lt;/div&gt;
          &lt;/div&gt;
        {{end}}
    &lt;/div&gt;
&lt;/div&gt;

{{$bookitems := getJSON &#34;https://db.immmmm.com/book&#34; }}
&lt;div class=&#34;douban border-bottom sc-ksluID gFnzgG&#34;&gt;
  &lt;h3&gt;&lt;a href=&#34;/books/&#34;&gt;近期阅读&lt;/a&gt;&lt;/h3&gt;
    &lt;div class=&#34;items sc-dIsUp fIuTG&#34;&gt;
        {{range $value := first 5 $bookitems.data}}
          {{ $item := $value.item }}
          {{ $itemRating := 0 }}{{ with $item.rating }}{{ $itemRating = . }}{{ end }}
          &lt;div class=&#34;dfdORB&#34;&gt;
            &lt;div class=&#34;sc-hKFxyN HPRth&#34;&gt;&lt;div class=&#34;lazyload-wrapper&#34;&gt;&lt;img class=&#34;avatar&#34; src=&#34;{{ $item.cover_image_url }}&#34; referrer-policy=&#34;no-referrer&#34; loading=&#34;lazy&#34; alt=&#34;&#34;  title=&#34;{{ $item.title }}&#34; width=&#34;150&#34; height=&#34;220&#34;&gt;&lt;/div&gt;&lt;/div&gt;
            &lt;div class=&#34;sc-fujyAs eysHZq&#34;&gt;
                &lt;div class=&#34;rating&#34;&gt;&lt;span class=&#34;allstardark&#34;&gt;&lt;span class=&#34;allstarlight&#34; style=&#34;width:{{ mul 10 $itemRating }}%&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;rating_nums&#34;&gt;{{ $itemRating }}&lt;/span&gt;&lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&#34;sc-iCoGMd kMthTr&#34;&gt;&lt;a rel=&#34;noreferrer&#34; href=&#34;https://neodb.social{{ $item.url }}&#34; target=&#34;_blank&#34;&gt;{{ $item.title }}&lt;/a&gt;&lt;/div&gt;
          &lt;/div&gt;
        {{end}}
    &lt;/div&gt;
&lt;/div&gt;
</code></pre><h3 id=后记>后记</h3><p>免费的就是贵啊，能用就用着先。</p></div><span class=post-tags>#<a href=https://yuranh211.github.io/tags/%E6%8A%98%E8%85%BE/>折腾</a>&nbsp;
</span><script type=module src="/emaction.js?v=2308072"></script><emoji-reaction theme=system class=reaction endpoint=https://api-emaction.immmmm.com reacttargetid=immmmm-hi-neodb-api></emoji-reaction><div class=clear></div><div class=pagination><div class=pagination__title><a class=pagination__title-h href=https://github.com/lmm214/immmmm/edit/master/content/posts/coding/hi-neodb-api.md target=_blank rel=noopener>阅读更多</a><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://yuranh211.github.io/new-mac-101/><span class=button__icon>←</span>
<span class=button__text>New Mac 101 🎉</span>
</a></span><span class="button next"><a href=https://yuranh211.github.io/bbs-by-memos/><span class=button__text>哔哔广场 x Twikoo</span>
<span class=button__icon>→</span></a></span></div></div><div class=pagination__title><span class=pagination__title-h>欢迎评论</span><hr></div><div id=tcomment></div><script src=/twikoo1629.js></script><script>twikoo.init({envId:"https://tk.edui.fun/",el:"#tcomment"})</script></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright-font"><span>共 225001 字<br><span id=wowBook></span></span></div><a class=dark-wormhole href=https://www.foreverblog.cn/go.html target=_blank><img src=/wormhole_1.gif alt style=width:auto;height:32px title=穿梭虫洞-随机访问十年之约友链博客> </a><a class=light-wormhole href=https://www.foreverblog.cn/go.html target=_blank><img src=/wormhole_3.gif alt style=width:auto;height:32px title=穿梭虫洞-随机访问十年之约友链博客></a><div class=copyright><span>© 2024 Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a> Theme by <a href=https://twitter.com/panr target=_blank rel=noopener>Panr</a></span></div></div></footer><script>var wowJSWord=22;const gradeChart=[{minpercent:40,letter:"写完一本我国著名的</br>四大名著了！"},{minpercent:35,letter:"写完一本 东野圭吾 的</br>《白夜行》了！"},{minpercent:34,letter:"写完一本 雨果 的</br>《巴黎圣母院》了！"},{minpercent:32,letter:"写完一本 艾米莉·勃朗特 的</br>《呼啸山庄》了！"},{minpercent:31,letter:"写完一本 阿来 的</br>《尘埃落定》了！"},{minpercent:30,letter:"写完一本 茅盾 的</br>《子夜》了！"},{minpercent:28,letter:"写完一本 张炜 的</br>《古船》了！"},{minpercent:25,letter:"写完一本 钱钟书 的</br>《围城》了！"},{minpercent:23,letter:"写完一本 简·奥斯汀 的</br>《傲慢与偏见》了！"},{minpercent:22,letter:"写完一本 莫泊桑 的</br>《一生》了！"},{minpercent:21,letter:"写完一本 东野圭吾 的</br>《解忧杂货店》了！"},{minpercent:20,letter:"写完一本 巴金 的</br>《寒夜》了！"},{minpercent:19,letter:"写完一本 亚米契斯 的</br>《爱的教育》了！"},{minpercent:18,letter:"写完一本 沈从文 的</br>《边城》了！"},{minpercent:17,letter:"写完一本 马克·吐温 的</br>《汤姆·索亚历险记》了！"},{minpercent:16,letter:"写完一本 曹禺 的</br>《日出》了！"},{minpercent:15,letter:"写完一本 伯内特 的</br>《秘密花园》了！"},{minpercent:14,letter:"写完一本 史铁生 的</br>《宿命的写作》了！"},{minpercent:13,letter:"写完一本 曹禺 的</br>《雷雨》了！"},{minpercent:12,letter:"写完一本 余华 的</br>《活着》了！"},{minpercent:11,letter:"写完一本 鲁迅 的</br>《彷徨》了！"},{minpercent:10,letter:"写完一本 马克·吐温 的</br>《王子与乞丐》了！"},{minpercent:9,letter:"写完一本 林海音 的</br>《城南旧事》了！"},{minpercent:7,letter:"写完一本 鲁迅 的</br>《呐喊》了！"},{minpercent:5,letter:"写完一本 埃克苏佩里 的</br>《小王子》了！"},{minpercent:0,letter:"还在努力更新中..</br>加油！加油啦！"}],getLetterGrade=e=>{const t=gradeChart.find(t=>e>=t.minpercent);return t.letter};document.getElementById("wowBook").innerHTML=getLetterGrade(wowJSWord)</script><script type=text/javascript src=/theme-main-1.js></script><script type=text/javascript src=/lately.min.js></script><script type=text/javascript src=/view-image.js></script><script type=text/javascript src="/theme-lmm.js?v=230824"></script><script type=text/javascript src=/pangu.min.js></script><script>document.addEventListener("DOMContentLoaded",()=>{pangu.autoSpacingPage()})</script></div></body></html>